(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(e,t,a){},127:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(15),i=a.n(s),l=a(3),r=a(4),c=a(6),d=a(5),u=a(7),h=a(9),p=a(11),m=a.n(p),f=a(19),k=a.n(f),g=a(22),v=a(53),b=a.n(v),y=[{value:"open",text:"TODO"},{value:"ongoing",text:"DOING"},{value:"done",text:"DONE"},{value:"backup",text:"BACKUP"}],E=[{value:"normal",text:"NO"},{value:"warn",text:"WARN"},{value:"danger",text:"DANGER"}],T=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.task;return o.a.createElement(o.a.Fragment,null,!(!t.isSubTaskOf||"open"===t.status)&&o.a.createElement("span",null,"-"),o.a.createElement("select",{className:"statusSel "+("open"===t.status?"dark":""),value:t.status,onChange:function(t){return e.props.onChange(t.target.value)}},y.map(function(e,t){return o.a.createElement("option",{key:t,value:e.value},e.text)})))}}]),t}(n.Component),w=a(93),C={tasks:[],_cache:function(e){return C.tasks=e.tasks,e},loadTestTasks:function(){return new Promise(function(e){var t=[];setTimeout(function(){t=w.tasks,e(t)},800)})},getGroupTasks:function(e,t){"undefined"===typeof t&&(t=function(e){return!0});var a=C.getAllTasks(),n=C.getTask(a,e),o=[];if(console.log(e,n,a),n){for(var s=n._index;s<a.length;s++){var i=a[s];if(i.id!==e&&i.isGroup)break;t(i)&&o.push(i)}return o}},getAllFinishedTasks:function(e){var t=[];return"undefined"===typeof e&&(e=C.getAllTasks()),e.forEach(function(e){"done"===e.status&&t.push(e)}),t},getAllTasks:function(){return C.tasks?C.tasks:[]},getTask:function(e,t){"undefined"===typeof t&&(t=e,e=C.getAllTasks());for(var a=0,n=e.length;a<n;a++)if(e[a]._index=a,e[a].id===t)return e[a]},createBlank:function(e){var t={id:("item"+Math.random()).replace(/\d{0,}\./g,""),textCatagory:"",title:"",status:"open",risk:"normal",owner:[],assistant:"",textOwner:"",textAssistent:"",cost:1,planned_begin_date:null,planned_end_date:null,description:"",isSubTaskOf:void 0};if("undefined"!==typeof e&&e)for(var a in e)t[a]=e[a];return t},addTask:function(e,t,a,n,o){"undefined"===typeof n&&(n=null),"undefined"!==typeof o&&o||(o={});var s=C.createBlank(o);if("undefined"===typeof t)e.tasks.push(s);else{var i=C.getTask(e.tasks,a)._index,l="undefined"!==typeof n&&n?n:C.createBlank(o);"before"===t&&e.tasks.splice(i,0,l),"after"===t&&e.tasks.splice(i+1,0,l)}return C._cache(e)},deleteTask:function(e,t,a){"undefined"===typeof a&&(a=!0);var n=C.getTask(e.tasks,t);if(!(!a||window.confirm('Sure to remove task "'.concat(n.title,'"?'))))return C._cache(e);var o=[];return e.tasks.forEach(function(e){e.id!==t&&o.push(e)}),e.tasks=o,C._cache(e)},updateTask:function(e,t,a){return e.tasks.forEach(function(e){e.id===t&&(e=Object.assign(e,a))}),C._cache(e)},beSubTask:function(e,t,a){var n=C.getTask(e.tasks,t);if(n._index>0){var o=e.tasks[n._index-1];n.isSubTaskOf=a?o.id:void 0}return C._cache(e)},moveUp:function(e,t){var a=C.getTask(e.tasks,t[0]);if(a._index>0){var n=e.tasks[a._index-1];if("done"!==n.status)e.tasks[a._index-1]=a,e.tasks[a._index]=n;else{console.warn("here");for(var o=a._index,s=o-1,i=!0;i;){var l=e.tasks[s];"done"!==l.status?i=!1:(e.tasks[s]=a,e.tasks[o]=l,s=(o=s)-1)}}}return C._cache(e)},moveDown:function(e,t){var a=C.getTask(e.tasks,t[0]);if(a._index<e.tasks.length-1){var n=e.tasks[a._index+1];if("done"!==n.status)e.tasks[a._index+1]=a,e.tasks[a._index]=n;else{console.warn("here");for(var o=a._index,s=o+1,i=!0;i;){var l=e.tasks[s];"done"!==l.status?i=!1:(e.tasks[s]=a,e.tasks[o]=l,s=(o=s)+1)}}}return C._cache(e)},getNextTask:function(e,t){return C.getNeighborTask(e,t,1)},getPrevTask:function(e,t){return C.getNeighborTask(e,t,0)},getNeighborTask:function(e,t,a){var n,o=C.getTask(e.tasks,t)._index;if(1===a)for(var s=o+1;s<e.tasks.length&&(n=e.tasks[s])&&(n.groupName||n.isMilestong);s++);if(0===a)for(var i=o-1;i>=0&&(n=e.tasks[i])&&(n.groupName||n.isMilestong);i--);return n},focusNeighbor:function(e,t,a){var n=C,o=n.getNeighborTask(e,t,a);if(o){var s=n.getTitleInput(o.id);s&&s.focus()}},getTitleInput:function(e){return document.getElementById("title-".concat(e))},saveToServer:function(e,t,a,n){document.getElementById("todo_item_table").setAttribute("class","saving_to_server"),k.a.post("/action/save/todos",{reponsitoryName:"team-todo-data",projectName:e,tasks:{items:t}}).then(function(e){console.log(e),setTimeout(function(){var e=document.getElementById("todo_item_table").getAttribute("class").replace(/saving_to_server/gi,"");document.getElementById("todo_item_table").setAttribute("class",e)},0)}).catch(function(e){console.log(e)})}},j=C,O=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).focusid=1,a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.task;return o.a.createElement("input",{className:"editing-catagory ",placeholder:"...",value:t.textCatagory,onChange:function(t){return e.props.onChange(t.target.value)},onKeyDown:function(a){return e.props.handleKeyDown(a,t.id)},onFocus:this.onFocus})}}]),t}(n.Component),N=(a(54),a(65)),S=(n.Component,function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.task;return o.a.createElement(o.a.Fragment,null,!(!t.isSubTaskOf||"normal"===t.risk)&&o.a.createElement("span",null,"-"),o.a.createElement("select",{className:"riskSel "+("normal"===t.risk?"dark":""),value:t.risk,onChange:function(t){return e.props.onChange(t.target.value)}},E.map(function(e,t){return o.a.createElement("option",{key:t,value:e.value},e.text)})))}}]),t}(n.Component)),_=a(10),D=(a(48),a(49),a(50),a(51),a(31)),x=a(32),M=a(33),U=(a(52),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).focusid=1,a.onFocus=a.onFocus.bind(Object(h.a)(a)),a.onKeyDown=a.onKeyDown.bind(Object(h.a)(a)),a.onKeyUp=a.onKeyUp.bind(Object(h.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"onFocus",value:function(){var e=this.props.task;this.focusid=e.id}},{key:"onKeyUp",value:function(e){this.props.onTitleKeyUp()}},{key:"onKeyDown",value:function(e){var t=e.key,a=this.focusid;a&&(e.ctrlKey?this.props.handleKeyDown(e,a):("Enter"===t&&this.props.onEnterDown(a),"ArrowUp"===t&&this.props.onFocusNeighbor(a,0),"ArrowDown"===t&&this.props.onFocusNeighbor(a,1)))}},{key:"render",value:function(){var e=this,t=this.props.task;return o.a.createElement(o.a.Fragment,null,!!t.isSubTaskOf&&o.a.createElement("span",{className:"subtask"},"-"),"ongoing"===t.status&&o.a.createElement(_.Icon,{size:12,icon:M.pause,className:"icon_inprogress"}),"open"===t.status&&o.a.createElement("span",null),o.a.createElement("span",null,o.a.createElement("input",{id:"title-".concat(t.id),className:"editing-title "+(t.title?"":"mandatory"),placeholder:"Title...",value:t.title,onChange:function(t){return e.props.onChange(t.target.value)},onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onFocus:this.onFocus})),"done"!==t.status&&o.a.createElement("span",null,"danger"===t.risk&&o.a.createElement(_.Icon,{size:18,icon:x.ic_error,className:"icon_danger"}),"warn"===t.risk&&o.a.createElement(_.Icon,{size:18,icon:D.ic_warning,className:"icon_warn"})))}}]),t}(n.Component)),A=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).focusid=1,a.onFocus=a.onFocus.bind(Object(h.a)(a)),a.onKeyDown=a.onKeyDown.bind(Object(h.a)(a)),a.onKeyUp=a.onKeyUp.bind(Object(h.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"onFocus",value:function(){var e=this.props.task;this.focusid=e.id}},{key:"onKeyUp",value:function(e){this.props.onTitleKeyUp()}},{key:"onKeyDown",value:function(e){var t=e.key;this.focusid;e.ctrlKey&&"s"===t&&(window.saveTasks(!1),e.preventDefault())}},{key:"render",value:function(){var e=this,t=this.props.task;return o.a.createElement(o.a.Fragment,null,!!t.isSubTaskOf&&o.a.createElement("span",null,"-"),(t.status,!1),o.a.createElement("input",{id:"owner-input".concat(this.props.idx),className:"editing-textpeople "+(t.title?"":"mandatory"),placeholder:"...",value:t.textOwner,onChange:function(t){return e.props.onChange(t.target.value)},onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onFocus:this.onFocus}))}}]),t}(n.Component),K=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).focusid=1,a.onFocus=a.onFocus.bind(Object(h.a)(a)),a.onKeyDown=a.onKeyDown.bind(Object(h.a)(a)),a.onKeyUp=a.onKeyUp.bind(Object(h.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"onFocus",value:function(){var e=this.props.task;this.focusid=e.id}},{key:"onKeyUp",value:function(e){this.props.onTitleKeyUp()}},{key:"onKeyDown",value:function(e){e.key,this.focusid}},{key:"render",value:function(){var e=this,t=this.props.task;return o.a.createElement("input",{id:"assistent-input".concat(this.props.idx),className:"editing-textpeople ",placeholder:"...",value:t.textAssistent,onChange:function(t){return e.props.onChange(t.target.value)},onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onFocus:this.onFocus})}}]),t}(n.Component),B=new Map;B.set("1","\u4e00"),B.set("2","\u4e8c"),B.set("3","\u4e09"),B.set("4","\u56db"),B.set("5","\u4e94"),B.set("6","\u516d"),B.set("0","\u65e5");var G={getTimeSpan:function(e,t,a){"begin"===a&&e.hours(8)&&e.minutes(0),"end"===a&&e.hours(18)&&e.minutes(0);var n=(e.toDate()-t.toDate())/864e5;return n=Math.round(10*n),((n/=10)>0?"+":"")+n},getWeekDameName:function(e){return B.get(m()(e).day()+"")}},I=new Map;I.set("1","\u4e00"),I.set("2","\u4e8c"),I.set("3","\u4e09"),I.set("4","\u56db"),I.set("5","\u4e94"),I.set("6","\u516d"),I.set("0","\u65e5");var F=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.date;if(e){var t=m()(e),a=m()();G.getTimeSpan(t,a,this.props.is)}return o.a.createElement(o.a.Fragment,null,e?o.a.createElement("div",{style:{float:"left",display:"inline"}},"(",G.getWeekDameName(e),")"):o.a.createElement("div",null))}}]),t}(n.Component),R=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e,t,a,n,s,i=this.props.task,l=i.planned_begin_date,r=i.planned_end_date;l&&r&&(e=m()(l),t=m()(r),a=G.getTimeSpan(t,e,"end")),l&&(e=m()(l),t=m()(),n=G.getTimeSpan(e,t,"begin")),r&&(e=m()(r),t=m()(),s=G.getTimeSpan(e,t,"end"));var c=s?parseInt(s):0;return o.a.createElement("div",null,!!n&&("done"!==i.status&&o.a.createElement("div",{className:"daysLost"},n)),!!s&&("done"!==i.status&&(c<0?o.a.createElement("div",{className:"daysLeft out-of-time"},s):o.a.createElement("div",{className:"daysLeft"},s))),!!a&&("done"===i.status?o.a.createElement("div",{className:"daysRange"},a,"d Cost"):o.a.createElement("div",{className:"daysRange"},a)),!(n||s||a)&&"-")}}]),t}(n.Component),L=(a(26),a(27),a(28),a(29),a(30),a(20)),z=a(58),P=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.task;return o.a.createElement("tr",{className:"task_group"},o.a.createElement("td",{colSpan:3,style:{backgroundColor:"#eee"}},o.a.createElement("input",{type:"checkbox",style:{float:"left"}}),"*"),o.a.createElement("td",{colSpan:2,className:"task_group_title"},o.a.createElement("span",null,o.a.createElement(_.Icon,{style:{color:"#ddd",float:"left",marginLeft:3},size:13,icon:z.folderOpen}),o.a.createElement("input",{id:"group-".concat(t.id),style:{float:"left",padding:"2px 0 0 2px"},value:t.groupName,onChange:function(t){return e.props.onNameChange(t.target.value)},onKeyDown:function(a){return e.props.handleKeyDown(a,t.id)}})),o.a.createElement("div",{style:{marginLeft:"2px",float:"right",padding:"2px 0 0 2px"}},o.a.createElement("a",{href:"javascript:void(0)",onClick:function(a){return e.props.handleGroupRemove(t.id)}},o.a.createElement(_.Icon,{style:{color:"#ddd"},size:9,icon:L.close})))),o.a.createElement("td",{colSpan:100,style:{backgroundColor:"#eee"}}))}}]),t}(n.Component),W=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.task;return o.a.createElement("tr",{className:"mileStone "+(t.milestoneStatus?t.milestoneStatus:"open")},o.a.createElement("td",{colSpan:100,style:{position:"relative"}},o.a.createElement("div",{className:"milestone-tip"},o.a.createElement("div",null,o.a.createElement("input",{className:"millestonename",id:"milestone-".concat(t.id),value:t.milestoneName,onChange:function(t){return e.props.onMilestongNameChange(t.target.value)},onKeyDown:function(a){return e.props.handleKeyDown(a,t.id)},placeholder:"Milestone"}),o.a.createElement("a",{href:"javascript:void(0)",style:{marginLeft:"5px"},onClick:function(a){return e.props.handleGroupRemove(t.id)}},o.a.createElement(_.Icon,{size:12,icon:L.close})))),o.a.createElement("div",{className:"milestone-toolbar"},o.a.createElement("select",{defaultValue:"",value:t.milestoneStatus,onChange:function(t){return e.props.onMilestongStatusChange(t.target.value)}},o.a.createElement("option",{value:"open"},"OPEN"),o.a.createElement("option",{value:"focus"},"TARGET"),o.a.createElement("option",{value:"done"},"DONE")))))}}]),t}(n.Component),Y=a(14),J=(a(114),a(115),function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!1}},{key:"render",value:function(){var e=this,t=this.props.task;return o.a.createElement("tr",{key:t.id,className:"finished_task",onMouseOver:function(e){return e.currentTarget.className=e.currentTarget.className+" hovering"},onMouseOut:function(e){return e.currentTarget.className=e.currentTarget.className.replace(/hovering/gi,"")}},o.a.createElement("td",null,o.a.createElement("input",{type:"checkbox"})),o.a.createElement("td",null,o.a.createElement("span",null,"[",this.props.i,"]")),o.a.createElement("td",null,o.a.createElement(_.Icon,{size:10,icon:Y.lock,style:{color:"#ddd"}})),o.a.createElement("td",null,o.a.createElement(_.Icon,{size:10,icon:Y.lock,style:{color:"#ddd"}}),o.a.createElement("span",{style:{float:"right"}},t.textCatagory)),o.a.createElement("td",{className:"task_title"},o.a.createElement("span",{style:{marginLeft:t.isSubTaskOf?29:2}},t.isSubTaskOf?"-":"",t.title)),o.a.createElement("td",null,o.a.createElement(_.Icon,{size:10,icon:Y.lock,style:{color:"#ddd"}}),t.textOwner?t.textOwner:""),o.a.createElement("td",null,o.a.createElement(_.Icon,{size:10,icon:Y.lock,style:{color:"#ddd"}}),o.a.createElement("a",{href:"javascript:void(0)",onClick:function(a){return e.props.handleTaskChange(t.id,"status","open")}},"RE-OPEN")),o.a.createElement("td",null,o.a.createElement(_.Icon,{size:10,icon:Y.lock,style:{color:"#ddd"}})),o.a.createElement("td",null,o.a.createElement(_.Icon,{size:10,icon:Y.lock,style:{color:"#ddd"}}),!!t.planned_end_date&&o.a.createElement(F,{date:t.planned_end_date,is:"end"}),!!t.planned_end_date&&""+m()(t.planned_end_date).format("MM-DD"),!t.planned_end_date&&"-"),o.a.createElement("td",{style:{display:"none"}},o.a.createElement(_.Icon,{size:10,icon:Y.lock,style:{color:"#ddd"}})),o.a.createElement("td",null,o.a.createElement(_.Icon,{size:10,icon:Y.lock,style:{color:"#ddd"}})),o.a.createElement("td",null,o.a.createElement(_.Icon,{size:10,icon:Y.lock,style:{color:"#ddd"}})),o.a.createElement("td",null,o.a.createElement(_.Icon,{size:10,icon:Y.lock,style:{color:"#ddd"}})),o.a.createElement("td",{colSpan:100}))}}]),t}(n.Component)),Z=a(36),H=a(62),Q=(a(120),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state=a.props,a.handleTaskChange=a.handleTaskChange.bind(Object(h.a)(a)),a.handleChange=a.handleChange.bind(Object(h.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleTaskChange",value:function(e,t,a){this.props.handleTaskUpdate(e,Object(g.a)({},t,a))}},{key:"handleChange",value:function(e,t){var a=this.state;a=Object.assign(a,Object(g.a)({},e,t)),this.setState(a)}},{key:"handleKeyDown",value:function(e,t){var a=e.key;e.ctrlKey&&("ArrowUp"===a&&this.props.handleMoveUp(t),"ArrowDown"===a&&this.props.handleMoveDown(t),"ArrowLeft"===a&&this.props.handleBeSubtask(t),"ArrowRight"===a&&this.props.handleUnSubtask(t),"Delete"===a&&this.props.handleDelete(t),"s"===a.toLowerCase()&&(window.saveTasks(!1),e.preventDefault()))}},{key:"onMouseMove",value:function(e,t){/hovering/.test(e.className)||(e.className=e.className+" hovering")}},{key:"onMouseOut",value:function(e){e.className=e.className.replace(/hovering/gi,"")}},{key:"render",value:function(){var e=this,t=this.props,a=this.props.tasks,n=this.props.colleagues;a.map(function(e,t){e.groupName||(e.groupName=""),e.description||(e.description=""),e.isSubTaskOf||(e.isSubTaskOf="")});var s=a.map(function(a,s){return o.a.createElement(o.a.Fragment,{key:a.id},a.isGroup||a.isMilestong?a.isGroup?o.a.createElement(P,{key:"group"+a.id,task:a,onNameChange:function(t){return e.handleTaskChange(a.id,"groupName",t)},handleGroupRemove:e.props.handleGroupRemove.bind(e),handleKeyDown:e.handleKeyDown.bind(e)}):!!a.isMilestong&&o.a.createElement(W,{key:"group"+a.id,task:a,onMilestongNameChange:function(t){return e.handleTaskChange(a.id,"milestoneName",t)},onMilestongStatusChange:function(t){return e.handleTaskChange(a.id,"milestoneStatus",t)},handleMoveUp:e.props.handleMoveUp.bind(e),handleMoveDown:e.props.handleMoveDown.bind(e),handleGroupRemove:e.props.handleGroupRemove.bind(e),handleKeyDown:e.handleKeyDown.bind(e)}):"done"===a.status?t.config.showDoneTasks?o.a.createElement(J,{i:s,task:a,handleTaskChange:e.handleTaskChange.bind(e)}):o.a.createElement("tr",{className:"finished_task_minimal"},o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",{class:"title"}),o.a.createElement("td",{colSpan:100})):o.a.createElement("tr",{key:a.id,className:"task risk_"+a.risk+" status_"+a.status+" "+(a.isSubTaskOf?"subtask":""),onMouseMove:function(t){return e.onMouseMove.bind(e)(t.currentTarget,a.id)},onClick:function(e){var t=e.target.tagName;if(!b.a.includes(["SELECT","INPUT","TEXTAREA"],t)){var n=document.getElementById("title-"+a.id);n&&n.focus()}},onMouseOut:function(t){return e.onMouseOut.bind(e)(t.currentTarget,a.id)}},o.a.createElement("td",null,o.a.createElement("input",{type:"checkbox"})),o.a.createElement("td",null,o.a.createElement("span",null,"[",s,"]")),o.a.createElement("td",{className:"row_toolbar"},o.a.createElement("a",{style:{marginLeft:1},href:"javascript:void(0)",onClick:function(t){return e.props.handleAddBefore(a.id)},title:"Add a new Task before this one."},"Bf"),o.a.createElement("a",{style:{marginLeft:1},href:"javascript:void(0)",onClick:function(t){return e.props.handleAddAfter(a.id)},title:"Add a new Task after this one."},"Af"),o.a.createElement("a",{style:{marginLeft:1},href:"javascript:void(0)",onClick:function(t){return e.props.handleGroupAdd(a.id)},title:"Add a Group-Title above."},"Gr"),o.a.createElement("a",{style:{marginLeft:1},href:"javascript:void(0)",onClick:function(t){return e.props.handleMilestoneAdd(a.id)},title:"Append a Milestone-Tip below."},"Ms")),o.a.createElement("td",null,a.textCatagory?o.a.createElement(O,{task:a,onChange:function(t){return e.handleTaskChange(a.id,"textCatagory",t)},handleKeyDown:e.handleKeyDown.bind(e)}):o.a.createElement("span",{style:{color:"#bbb"},onDoubleClick:function(t){e.handleTaskChange(a.id,"textCatagory","New Tip")}},"+tip")),o.a.createElement("td",{className:"task_title "+(a.isSubTaskOf?"subtasktd ":" ")+("ongoing"===a.status?"ongoing ":" ")},"backup"===a.status?o.a.createElement("span",null,a.title):o.a.createElement(U,{task:a,idx:s,onChange:function(t){return e.handleTaskChange(a.id,"title",t)},onMoveUp:e.props.handleMoveUp,onMoveDown:e.props.handleMoveDown,onBeSubtask:e.props.handleBeSubtask,onUnSubtask:e.props.handleUnSubtask,onFocusNeighbor:e.props.handleFocusNeighbor,onDelete:e.props.handleDelete,onEnterDown:e.props.handleEnterDown,onTitleKeyUp:e.props.handleTitleKeyUp,handleKeyDown:e.handleKeyDown.bind(e)})),o.a.createElement("td",{className:"owner "+(a.isSubTaskOf?"subtasktd ":" ")+("ongoing"===a.status?"ongoing ":" ")},o.a.createElement(A,{task:a,idx:s,colleagues:n,onChange:function(t){return e.handleTaskChange(a.id,"textOwner",t)},onMoveUp:e.props.handleMoveUp,onMoveDown:e.props.handleMoveDown,onDelete:e.props.handleDelete,onEnterDown:e.props.handleEnterDown,onTitleKeyUp:e.props.handleTitleKeyUp})),o.a.createElement("td",{className:a.isSubTaskOf?"subtasktd":"",style:{display:e.state.config.showTaskConfig?"":"none"}},o.a.createElement(T,{task:a,onChange:function(t){return e.handleTaskChange(a.id,"status",t)}})),o.a.createElement("td",{style:{display:"none"}},o.a.createElement(K,{task:a,idx:s,colleagues:n,onChange:function(t){return e.handleTaskChange(a.id,"textAssistent",t)},onMoveUp:e.props.handleMoveUp,onMoveDown:e.props.handleMoveDown,onDelete:e.props.handleDelete,onEnterDown:e.props.handleEnterDown,onTitleKeyUp:e.props.handleTitleKeyUp})),o.a.createElement("td",{style:{display:"none"}},o.a.createElement("div",{className:"cost-cell"},o.a.createElement(H,{idx:s,className:"form-control",min:.5,max:100,value:a.cost,step:.5,snap:!0,onChange:function(t){return e.handleTaskChange(a.id,"cost",t)}}))),o.a.createElement("td",null,o.a.createElement(F,{date:a.planned_begin_date,is:"begin"}),o.a.createElement("div",{style:{float:"left",display:"inline"}},o.a.createElement(Z.a,{idx:s,className:"planned_end_date",dateFormat:"MM-DD",selected:a.planned_begin_date?m()(a.planned_begin_date):null,onChange:function(t){return e.handleTaskChange(a.id,"planned_begin_date",t?t.format("YYYY-MM-DD"):"")},isClearable:!0,placeholderText:"st"}))),o.a.createElement("td",null,o.a.createElement(F,{date:a.planned_end_date,is:"end"}),o.a.createElement("div",{style:{float:"left",display:"inline"}},o.a.createElement(Z.a,{idx:s,className:"planned_end_date",dateFormat:"MM-DD",selected:a.planned_end_date?m()(a.planned_end_date):null,onChange:function(t){return e.handleTaskChange(a.id,"planned_end_date",t?t.format("YYYY-MM-DD"):"")},isClearable:!0,placeholderText:"ed"}))),o.a.createElement("td",null,o.a.createElement(R,{task:a})),o.a.createElement("td",{className:a.isSubTaskOf?"subtasktd":"",style:{display:e.state.config.showTaskConfig?"":"none"}},o.a.createElement(S,{task:a,onChange:function(t){return e.handleTaskChange(a.id,"risk",t)}})),o.a.createElement("td",null,a.description?o.a.createElement("input",{className:"description",placeholder:"...",task:a,value:a.description,onChange:function(t){return e.handleTaskChange(a.id,"description",t.target.value)}}):o.a.createElement("span",{style:{color:"#bbb"},onDoubleClick:function(t){e.handleTaskChange(a.id,"description","New Desc")}},"+desc")),o.a.createElement("td",null,o.a.createElement("a",{href:"javascript:void(0)",onClick:function(t){return e.props.handleDeleteTask(a.id)}},o.a.createElement(_.Icon,{size:14,icon:L.close,style:{color:"#aaa"}})))))});return o.a.createElement("div",{className:"todo_item"},o.a.createElement("table",{id:"todo_item_table",className:"todo_item_table",border:"0"},o.a.createElement("thead",null,o.a.createElement("tr",{className:"thead"},o.a.createElement("th",{align:"left"},o.a.createElement("input",{type:"checkbox"})),o.a.createElement("th",{align:"left"}),o.a.createElement("th",{align:"left"}),o.a.createElement("th",{align:"left"},"Tip"),o.a.createElement("th",{align:"left"},"Subject"),o.a.createElement("th",{align:"left"},"Owner"),o.a.createElement("th",{align:"left",style:{display:this.state.config.showTaskConfig?"":"none"}},"Status"),o.a.createElement("th",{align:"left",style:{display:"none"}},"Assistant"),o.a.createElement("th",{align:"left",style:{display:"none"}},"Cost"),o.a.createElement("th",{align:"left"},"Start"),o.a.createElement("th",{align:"left"},"End"),o.a.createElement("th",{align:"left"},"Day(s)"),o.a.createElement("th",{align:"left",style:{display:this.state.config.showTaskConfig?"":"none"}},"Risk"),o.a.createElement("th",{align:"left"},"Desc"),o.a.createElement("th",{align:"left"}))),o.a.createElement("tbody",null,s)))}}]),t}(n.Component)),V=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state=a.props,a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.a.get("/action/projects",{params:{reponsitoryName:"team-todo-data"}}).then(function(t){var a=t.data;e.setState({projects:a})}).catch(function(e){console.log(e)})}},{key:"onCheckboxChange",value:function(e){}},{key:"onChange",value:function(e){var t=e.getAttribute("val");this.props.onChange(t),this.setState({projectName:t},function(){window.localStorage.setItem("team-todo_projectName",t)})}},{key:"render",value:function(){var e=this,t=[];this.state.projectName;return this.state.projects.map(function(a,n){return t.push(o.a.createElement("li",{key:n},o.a.createElement("input",{type:"checkbox",checked:a===e.state.projectName,onChange:function(t){return e.onCheckboxChange.bind(e)(t.target)}}),o.a.createElement("a",{href:"javascript:void(0)",val:a,onClick:function(t){return e.onChange.bind(e)(t.target)}},a)))}),o.a.createElement("div",{className:"projectlist"},o.a.createElement("span",{style:{margin:"2px 10px 10px 0",fontWeight:"bolder"}},"Projects:")," ","("+G.getWeekDameName(new Date)+")"+m()().format("YYYY-MM-DD"),o.a.createElement("hr",null),o.a.createElement("ul",{style:{marginLeft:"10px"}},t))}}]),t}(n.Component),X=(a(121),a(122),!0);window.saveTasks=function(e){"undefined"===typeof e&&(e=!0),X=e,document.getElementById("saveBtn").click()};var $=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).deleteTask=a.deleteTask.bind(Object(h.a)(a)),a.createTask=a.createTask.bind(Object(h.a)(a)),a.loadTask=a.loadTask.bind(Object(h.a)(a)),a.loadServerTask=a.loadServerTask.bind(Object(h.a)(a)),a.showStatusConfigBar=a.showStatusConfigBar.bind(Object(h.a)(a)),a.handleTaskUpdate=a.handleTaskUpdate.bind(Object(h.a)(a)),a.moveTaskUp=a.moveTaskUp.bind(Object(h.a)(a)),a.moveTaskDown=a.moveTaskDown.bind(Object(h.a)(a)),a.handleTitleKeyUp=a.handleTitleKeyUp.bind(Object(h.a)(a)),a.state=Object.assign({},a.props),a.state.finishedCount=0,console.log("init.state",a.state),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.createTask(),setTimeout(function(){document.getElementById("btn-load").click()},10)}},{key:"doSetState",value:function(e,t){var a=e.tasks;e.finishedCount=j.getAllFinishedTasks(a).length,this.setState(e,t)}},{key:"handleBeSubTask",value:function(e,t){this.state=j.beSubTask(this.state,e,t),this.doSetState(this.state)}},{key:"moveTaskDown",value:function(e){this.state=j.moveDown(this.state,[e]),this.doSetState(this.state,function(){var t=document.getElementById("title-".concat(e));t||(t=document.getElementById("group-".concat(e))),t||(t=document.getElementById("milestone-".concat(e))),t&&t.focus()})}},{key:"moveTaskUp",value:function(e){this.state=j.moveUp(this.state,[e]),this.doSetState(this.state,function(){var t=document.getElementById("title-".concat(e));t||(t=document.getElementById("group-".concat(e))),t||(t=document.getElementById("milestone-".concat(e))),t&&t.focus()})}},{key:"handleBeSubtask",value:function(e){this.handleBeSubTask(e,!1)}},{key:"handleUnSubtask",value:function(e){this.handleBeSubTask(e,!0)}},{key:"handleEnterDown",value:function(e){this.handleAddAfter(e)}},{key:"handleFocusNeighbor",value:function(e,t){j.focusNeighbor(this.state,e,t)}},{key:"loadTask",value:function(){var e=this;j.loadTestTasks().then(function(t){e.doSetState({tasks:t},function(){j._cache(e.state)})})}},{key:"loadServerTask",value:function(){var e=this;j.getAllTasks();k.a.get("/action/todos",{params:{reponsitoryName:"team-todo-data",projectName:this.state.projectName}}).then(function(t){t.data.items||"undefined"!==typeof t.data.shift||(t.data.items=[]);var a=t.data.items?t.data.items:t.data;0===a.length&&(a=[j.createBlank()]),e.doSetState({tasks:a},function(){j._cache(e.state)})}).catch(function(e){console.log(e)})}},{key:"saveServerTask",value:function(){var e=j.getAllTasks(),t=this.state.projectName;X&&!window.confirm("Save?")||j.saveToServer(t,e)}},{key:"showDoneTasks",value:function(){this.state.config.showDoneTasks=!this.state.config.showDoneTasks,this.doSetState(this.state)}},{key:"createProject",value:function(){var e=prompt("New Project Name?");if(e){var t=this;k.a.post("/action/create/project",{reponsitoryName:"team-todo-data",projectName:e}).then(function(a){t.handleProjectNameChange(e),alert(a.data)}).catch(function(e){console.log(e)})}else alert("Name Can Not Be Null.")}},{key:"handleProjectNameChange",value:function(e){this.state.projectName=e,this.doSetState(this.state,function(){document.getElementById("btn-load").click()})}},{key:"deleteTask",value:function(e,t){this.state=j.deleteTask(this.state,e,t),this.doSetState(this.state)}},{key:"createTask",value:function(){this.state=j.addTask(this.state),this.doSetState(this.state)}},{key:"showStatusConfigBar",value:function(){var e=this.state;e.config.showTaskConfig=!e.config.showTaskConfig,this.doSetState(e)}},{key:"handleTaskUpdate",value:function(e,t){this.state=j.updateTask(this.state,e,t),this.doSetState(this.state)}},{key:"handleTitleKeyUp",value:function(){var e=j.getAllTasks();e.length<=0||e[e.length-1].title&&(this.state=j.addTask(this.state),this.doSetState(this.state))}},{key:"handleAddBefore",value:function(e){this.state=j.addTask(this.state,"before",e),this.doSetState(this.state,function(){var t=document.getElementById("title-".concat(e));t&&t.focus()})}},{key:"handleAddAfter",value:function(e){var t=j.getTask(this.state.tasks,e);this.state=j.addTask(this.state,"after",e,null,{isSubTaskOf:t.isSubTaskOf});var a=this;this.doSetState(this.state,function(){var t=a.state,n=j.getNextTask(t,e),o=document.getElementById("title-".concat(n.id));o&&o.focus()})}},{key:"handleGroupAdd",value:function(e){var t=window.prompt("Task Title Pls?");t?(this.state=j.addTask(this.state,"before",e,{id:("G"+Math.random()).replace(/\./gi,""),isGroup:!0,groupName:t}),this.doSetState(this.state)):alert("Can not be null")}},{key:"handleMilestoneAdd",value:function(e){var t=window.prompt("Milestone Name Pls?");t?(this.state=j.addTask(this.state,"after",e,{id:("G"+Math.random()).replace(/\./gi,""),isMilestong:!0,milestoneName:t,milestoneStatus:"",name:t}),this.doSetState(this.state)):alert("Can not be null")}},{key:"handleGroupRemove",value:function(e){var t=j.getTask(this.state.tasks,e);window.confirm('Sure to remove "'.concat(t.groupName,'"?'))&&this.deleteTask(e,!1)}},{key:"handleGroupRename",value:function(e){var t=j.getTask(this.state.tasks,e),a=window.prompt('Change title "'.concat(t.groupName,'" to:'));a?(this.state=j.updateTask(this.state,e,{groupName:a}),this.doSetState(this.state)):alert("Can not be null")}},{key:"moveGroupUp",value:function(e){this.state=j.moveGroupUp(this.state,e),this.doSetState(this.state)}},{key:"moveGroupDown",value:function(e){this.state=j.moveGroupDown(this.state,e),this.doSetState(this.state)}},{key:"printAllTasks",value:function(){console.log(this.state),console.log(JSON.stringify(this.state))}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(V,{projects:this.state.projects,projectName:this.state.projectName,onChange:this.handleProjectNameChange.bind(this)}),o.a.createElement("div",{className:"todo_main"},o.a.createElement("input",{style:{display:"none",width:"80px"},value:this.state.projectName,onChange:function(t){return e.handleProjectNameChange.bind(e)(t.target.value)}}),o.a.createElement("button",{id:"btn-load",style:{display:"none"},className:"btn btn-load",onClick:this.loadServerTask.bind(this)},"Load"),o.a.createElement("button",{id:"saveBtn",className:"btn btn-save",style:{display:"none"},onClick:this.saveServerTask.bind(this)},"Save"),o.a.createElement("div",null,0===this.state.tasks.length?"No-data":o.a.createElement(Q,{tasks:this.state.tasks,colleagues:this.state.colleagues,handleDeleteTask:this.deleteTask,handleBeSubTask:this.handleBeSubTask.bind(this),handleMoveDown:this.moveTaskDown,handleMoveUp:this.moveTaskUp,handleBeSubtask:this.handleBeSubtask.bind(this),handleUnSubtask:this.handleUnSubtask.bind(this),handleEnterDown:this.handleEnterDown.bind(this),handleFocusNeighbor:this.handleFocusNeighbor.bind(this),handleDelete:this.deleteTask,handleCreate:this.createTask,handleTaskUpdate:this.handleTaskUpdate,handleTitleKeyUp:this.handleTitleKeyUp,handleAddBefore:this.handleAddBefore.bind(this),handleAddAfter:this.handleAddAfter.bind(this),handleGroupAdd:this.handleGroupAdd.bind(this),handleMilestoneAdd:this.handleMilestoneAdd.bind(this),handleGroupRemove:this.handleGroupRemove.bind(this),handleGroupRename:this.handleGroupRename.bind(this),handleGroupMoveDown:this.moveGroupDown.bind(this),handleGroupMoveUp:this.moveGroupUp.bind(this),config:this.state.config})),o.a.createElement("div",{style:{position:"fixed",right:0,bottom:0}},o.a.createElement("button",{onClick:this.showDoneTasks.bind(this)},this.state.config.showDoneTasks?"HideFinished":"ShowFinised(".concat(this.state.finishedCount,")")),o.a.createElement("button",{onClick:this.createProject.bind(this)},"CreateProject"),o.a.createElement("button",{onClick:this.printAllTasks.bind(this)},"Print: ",this.state.tasks.length," items"),"\u2003",o.a.createElement("button",{onClick:this.loadTask},"loadTestTask"),o.a.createElement("button",{onClick:this.showStatusConfigBar},"showStatusConfigBar"))))}}]),t}(n.Component);document.title="Todo list";var q={"zhang3@company.com":{name:"ZhangSan"},"li4@company.com":{name:"LiSi"},"wang5@company.com":{name:"WangWu"},"zhao6@company.com":{name:"ZhaoLiu"}},ee=[],te=window.localStorage.getItem("team-todo_projectName"),ae=te||"default";window.location.search&&(ae=window.location.search.split("=")[1]);a(123);var ne=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement($,{projects:["default"],projectName:ae,tasks:ee,colleagues:q,config:{showTaskConfig:!0,showDoneTasks:!0}})}}]),t}(n.Component),oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function se(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var ie=a(35);ie.a.listen("ask_for_sum",function(e,t){return e+t}),ie.a.emit("ask_for_sum",1,2).onResponse(function(e,t){console.log("sum:",e)}),i.a.render(o.a.createElement(ne,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");oe?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):se(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):se(e)})}}()},66:function(e,t,a){e.exports=a(127)},93:function(e){e.exports={tasks:[{id:"234123",isGroup:!0,groupName:"Group1"},{id:"item6426232742034896",groupName:"Group1",textCatagory:"",title:"1111",status:"ongoing",risk:"warn",owner:[],assistant:[],textOwner:"",textAssistant:"",cost:1.5,planned_begin_date:"2018-07-13",planned_end_date:"2018-07-13"},{id:"item5403666890885193",textCatagory:"",title:"222",status:"done",risk:"normal",owner:["li4@company.com"],assistant:[],textOwner:"",textAssistant:"",cost:2.5,planned_begin_date:"2018-07-13",planned_end_date:"2018-07-13"},{id:"32342342311",isGroup:!0,groupName:"Group2"},{id:"item9282666481815387",textCatagory:"",groupName:"Group2",title:"333",status:"open",risk:"danger",owner:["wang5@company.com"],assistant:[],textOwner:"",textAssistant:"",cost:1.5,planned_begin_date:"2018-07-13",planned_end_date:"2018-07-24"},{id:"item9282643531815387",textCatagory:"",title:"333",status:"open",risk:"danger",owner:["wang5@company.com"],assistant:[],textOwner:"",textAssistant:"",cost:1.5,planned_begin_date:"2018-07-13",planned_end_date:"2018-07-24"}],colleagues:{"zhang3@company.com":{name:"ZHANG-SAN"},"li4@company.com":{name:"LI-SI"},"wang5@company.com":{name:"WANG-WU"}}}}},[[66,1,2]]]);
//# sourceMappingURL=main.701a95da.chunk.js.map